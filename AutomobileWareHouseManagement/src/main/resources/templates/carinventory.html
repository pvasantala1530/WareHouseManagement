<html xmlns:th="http://www.thymeleaf.org">

<head>
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"
		integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">

	<link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
	<script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>

	<script>

		function showinventorydetails(carmakeId) {

			let xhr = new XMLHttpRequest();

			let resp;
			// Making our connection 
			let url = 'showinventorydetails/' + carmakeId;
			xhr.open("GET", url, true);

			// function executes after request is successful
			xhr.onreadystatechange = function () {
				if (this.readyState == 4 && this.status == 200) {

					resp = JSON.parse(this.responseText);
					console.log(resp);
					let text = "";

					resp.forEach(function (item, index) {
						text = text + "<tr><td>" + item.model + "</td>" +
							"<td>" + item.color + "</td>" +
							"<td>" + item.price + "</td>" +
							"<td>" + item.quantity + "</td>" +
							"<td><input type='checkbox' id=inventoryid" + item.inventoryid + "' value='" + item.inventoryid + "''></td>" +
							"</tr><tr>"
					});

					document.getElementById("inventoryDets").innerHTML = text;
					let element = document.getElementById("inventoryDetstab");
					let hidden = element.getAttribute("hidden");
					if (hidden) {
						element.removeAttribute("hidden");

					}
				}
			}
			// Sending our request
			xhr.send();
		}
	</script>
</head>

<body>

	<div class="container">
		<div class="row">
			<h1>Auto Inventory Control</h1>
		</div><br>
		<!--<table class="table table-striped table-bordered">
			<thead class="table-dark">
				<tr>
					<th th:text="${warehouseLoc}"></th>
<a href="#" class="list-group-item list-group-item-action active" th:text="${warehouseLoc}"></a>
				</tr>
			</thead>
			<tbody>
				<tr th:each="carmake: ${carmakelist}">
					<td th:text="${carmake.make}"></td>
				</tr>
			</tbody>
		</table>-->
		<nav class="navbar navbar-expand-lg navbar-light bg-light">
			<a class="navbar-brand" href="/autoinventorycontrol/warehouses">Warehouses</a>
			<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent"
				aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
				<span class="navbar-toggler-icon"></span>
			</button>

			<div class="collapse navbar-collapse" id="navbarSupportedContent">
				<ul class="navbar-nav mr-auto">
					<li class="nav-item active">
						<a class="nav-link" href="#">View Inventory <span class="sr-only">(current)</span></a>
					</li>
					<li class="nav-item">
						<a class="nav-link" href="#">Add Inventory</a>
					</li>
					<li class="nav-item">
						<a class="nav-link" href="#">Update Inventory</a>
					</li>
					<!--<li class="nav-item dropdown">
        <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
          Dropdown
        </a>
        <div class="dropdown-menu" aria-labelledby="navbarDropdown">
          <a class="dropdown-item" href="#">Action</a>
          <a class="dropdown-item" href="#">Another action</a>
          <div class="dropdown-divider"></div>
          <a class="dropdown-item" href="#">Something else here</a>
        </div>
      </li>-->
					<li class="nav-item">
						<a class="nav-link disabled" href="#">Disabled</a>
					</li>
				</ul>

			</div>
		</nav>

		<div class="list-group">
			<button type="button" class="list-group-item list-group-item-dark active"
				th:text="${warehouseLoc}"></button>

			

			<th:block th:each="carmake, carState : ${carmakelist}">
				<li class="list-group-item d-flex justify-content-between align-items-center" style="cursor: pointer" th:onclick="showinventorydetails([[${carmake.makeId}]]);">
					[(${carmake.make})]
					<span class="badge badge-primary badge-pill">14</span>
				</li>
			</th:block>
		</div>


		<br><br>
		<table class="table" hidden="hidden" id="inventoryDetstab">
			<thead class="thead-light">
				<tr>
					<th scope="col">Model</th>
					<th scope="col">Color</th>
					<th scope="col">Price</th>
					<th scope="col">Quantity</th>
					<th scope="col">Select</th>
				</tr>
			</thead>
			<tbody id="inventoryDets">

			</tbody>
		</table>


		<button type="button" id="add" class="btn btn-primary" data-toggle="modal" data-target="#exampleModal"
			data-whatever="@mdo">Add new</button>
		<button type="button" id="update" class="btn btn-primary" data-toggle="modal" data-target="#exampleModal"
			data-whatever="@fat">Update Existing</button>
		<button type="button" id="delete" class="btn btn-primary" data-toggle="modal" data-target="#exampleModal"
			data-whatever="@getbootstrap">Delete Existing</button>

		<div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
			aria-hidden="true">
			<div class="modal-dialog" role="document">
				<div class="modal-content">
					<div class="modal-header">
						<h5 class="modal-title" id="exampleModalLabel">New message</h5>
						<button type="button" class="close" data-dismiss="modal" aria-label="Close">
							<span aria-hidden="true">&times;</span>
						</button>
					</div>
					<div class="modal-body">
						<form>
							<div class="form-group">
								<label for="recipient-name" class="col-form-label">Recipient:</label>
								<input type="text" class="form-control" id="recipient-name">
							</div>
							<div class="form-group">
								<label for="message-text" class="col-form-label">Message:</label>
								<textarea class="form-control" id="message-text"></textarea>
							</div>
						</form>
					</div>
					<div class="modal-footer">
						<button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
						<button type="button" class="btn btn-primary">Send message</button>
					</div>
				</div>
			</div>
		</div>

</body>
<script>



	$('#exampleModal').on('show.bs.modal', function (event) {
		var button = $(event.relatedTarget) // Button that triggered the modal
		var recipient = button.data('whatever') // Extract info from data-* attributes
		// If necessary, you could initiate an AJAX request here (and then do the updating in a callback).
		// Update the modal's content. We'll use jQuery here, but you could use a data binding library or other methods instead.
		var modal = $(this)
		modal.find('.modal-title').text('New message to ' + recipient)
		modal.find('.modal-body input').val(recipient)
	})
</script>

</html>