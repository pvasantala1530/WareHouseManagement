<html xmlns:th="http://www.thymeleaf.org">

<head>
	<title>Auto Inventory Control</title>
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"
		integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">



	<script>

		function gotoAddInventory(warehouseId) {
			
			var ele = document.getElementsByName('add_inv');
 			let flag = 0;
            for (i = 0; i < ele.length; i++) {
                if (ele[i].checked)
                    {	
						flag = 1;
						let carmake = document.getElementById(ele[i].value).value;
						window.location.href = "new/" + warehouseId+"/"+ele[i].value+"/"+carmake;
					}
            }
            if(flag==0)
            
			alert('Select Car Brand to add Inventory');
		}

		function showinventorydetails(carmakeId) {

			let xhr = new XMLHttpRequest();

			let resp;
			// Making our connection 
			let url = 'showinventorydetails/' + carmakeId;
			xhr.open("GET", url, true);

			// function executes after request is successful
			xhr.onreadystatechange = function () {
				if (this.readyState == 4 && this.status == 200) {

					resp = JSON.parse(this.responseText);
					console.log(resp);
					let text = "";

					resp.forEach(function (item, index) {
						text = text + "<tr><td>" + item.model + "</td>" +
							"<td>" + item.color + "</td>" +
							"<td>" + item.price + "</td>" +
							"<td>" + item.quantity + "</td>" +
							"</tr><tr>"
					});

					document.getElementById("inventoryDets").innerHTML = text;
					let element = document.getElementById("inventoryDetstab");
					let hidden = element.getAttribute("hidden");
					if (hidden) {
						element.removeAttribute("hidden");

					}
				}
			}
			// Sending our request
			xhr.send();
		}
	</script>
</head>

<body>

	<div class="container">
		<div class="row">
			<h1>Auto Inventory Control</h1>
		</div><br><br>

		<h3>[(${warehouseLoc})]</h3>



		<table class="table table-striped table-bordered">
			<thead class="table-dark">
				<tr>
					<th>Inventory Details</th>
				</tr>
			</thead>
			<tbody>
				<tr th:each="carmake : ${carmakelist}">
					<td>
						<input type="radio" th:value="${carmake.makeId}" id="carmakeradio" name="add_inv">
						<input type="hidden" th:value="${carmake.make}" th:id="${carmake.makeId}"}>
						<a th:onclick="showinventorydetails([[${carmake.makeId}]]);" th:text="${carmake.make}"
							style="cursor: pointer" />
					</td>
				</tr>
			</tbody>
		</table>

		<br>
		<div class="row">
			<div class="col-lg-3">
				<a th:onclick="gotoAddInventory([[${warehouseId}]]);" class="btn btn-primary btn-sm mb-3">Add inventory</a>
			</div>
		</div>
		<br><br>
		<table class="table" hidden="hidden" id="inventoryDetstab">
			<thead class="thead-light">
				<tr>
					<th scope="col">Model</th>
					<th scope="col">Color</th>
					<th scope="col">Price</th>
					<th scope="col">Quantity</th>
					<th scope="col">Select</th>
				</tr>
			</thead>
			<tbody id="inventoryDets">

			</tbody>
		</table>





</body>


</html>